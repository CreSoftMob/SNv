<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta httpEquiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>SameNext</title>
    <meta name="description" content="SameNext é um rede social de origem brasileira que têm tradução de texto para  libras. Isso traz inclusão para pessoas surdas. Instale o PWA no seu dispositivo e aproveite!" />
    <meta name="keywords" content="SameNext, rede social,rede social brasileira,PWA, app, web app, plataforma" />
    <meta name="author" content="SameNext" />
      <link rel="manifest" href="/manifest.json" />
    <!-- The `react-native-web` recommended style reset: https://necolas.github.io/react-native-web/docs/setup/#root-element -->
    <style id="expo-reset">
      /* These styles make the body full-height */
      html,
      body {
        height: 100%;
      }
      /* These styles disable body scrolling if you are using <ScrollView> */
      body {
        overflow: hidden;
      }
      /* These styles make the root element full-height */
      #root {
        display: flex;
        height: 100%;
        flex: 1;
      }
    </style>
  <link rel="shortcut icon"  href="/favicon.ico" /></head>

  <body>
    <!-- Use static rendering with Expo Router to support running without JavaScript. -->
    <noscript>
      You need to enable JavaScript to run this app.
    </noscript>
    <main>
    <h1>Meu PWA Incrível</h1>
    <button id="installButton" style="display: none; padding: 10px; font-size: 16px;">
        </button>
    
    <p id="installInstructionText" style="display: none; padding: 15px; border: 1px dashed blue; background-color: #e6f0ff;">
        </p>

    <p>... Conteúdo do seu aplicativo ...</p>
</main>

<script src="seu_script.js"></script>
    <!-- The root element for your Expo app. -->
    <div id="root"></div>
     <script>
    // Verifica se o navegador suporta Service Workers
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
            // Registra o Service Worker a partir do arquivo sw.js
            navigator.serviceWorker.register('/service-worker.js').then(function(registration) {
                // Registro bem-sucedido
                console.log('Service Worker registrado com sucesso:', registration.scope);
            }, function(err) {
                // Registro falhou
                console.log('Falha no registro do Service Worker:', err);
            });
        });
    }
</script>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
    const installButton = document.getElementById('installButton');
    const installInstructionText = document.getElementById('installInstructionText');
    let deferredPrompt;

    // --- 1. FUNÇÃO DE DETECÇÃO DE SISTEMA OPERACIONAL ---
    function isIOS() {
        const userAgent = navigator.userAgent;
        // Verifica se é um dispositivo Apple e se não é um aplicativo web (standalone)
        return (
            /iPad|iPhone|iPod/.test(userAgent) && !window.MSStream &&
            !window.navigator.standalone
        );
    }
    
    function isAndroid() {
        const userAgent = navigator.userAgent;
        // Verifica se é um dispositivo Android
        return /Android/.test(userAgent);
    }
    
    // Verifica se o aplicativo já está em modo standalone (já instalado)
    function isStandalone() {
        return (window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone);
    }

    // Se já estiver instalado (standalone), não faz nada
    if (isStandalone()) {
        console.log('PWA já instalado.');
        return;
    }

    // --- 2. LÓGICA ESPECÍFICA PARA IOS (iPHONE/IPAD) ---
    if (isIOS()) {
        console.log('Dispositivo iOS detectado.');
        
        // Esconde o botão e exibe as instruções
        installButton.style.display = 'none';
        
        // Exibe o texto de instrução
        if (installInstructionText) {
            installInstructionText.innerHTML = `
                Para adicionar à tela inicial, toque no **Ícone de Compartilhamento** ($\text{\uparrow}$) 
                na barra de navegação do Safari e selecione **"Adicionar à Tela de Início"**. 
                
            `;
            installInstructionText.style.display = 'block';
        }
        return;
    }

    // --- 3. LÓGICA ESPECÍFICA PARA ANDROID (COMPATÍVEL COM PWA) ---
    // Este evento só é disparado em navegadores que suportam a instalação (ex: Chrome no Android)
    window.addEventListener('beforeinstallprompt', (event) => {
        console.log('Evento beforeinstallprompt detectado (Android/Desktop compatível).');
        
        // Previne que o prompt padrão apareça imediatamente
        event.preventDefault();
        
        // Armazena o evento para ser acionado pelo clique do nosso botão
        deferredPrompt = event;

        // Torna o botão visível
        if (installButton) {
            installButton.style.display = 'block';
            installButton.textContent = 'Instalar Aplicativo';
        }

        // Adiciona o Listener de clique
        installButton.addEventListener('click', () => {
            if (deferredPrompt) {
                // Esconde o botão para evitar cliques duplicados
                installButton.style.display = 'none';
                
                // Dispara o prompt de instalação nativo
                deferredPrompt.prompt();
                
                // Captura a escolha do usuário
                deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === 'accepted') {
                        console.log('Usuário aceitou a instalação do PWA.');
                    } else {
                        console.log('Usuário recusou a instalação do PWA.');
                    }
                    deferredPrompt = null;
                });
            }
        });
    });

    // Oculta o botão se a instalação ocorrer depois que a página foi carregada
    window.addEventListener('appinstalled', () => {
        if (installButton) {
            installButton.style.display = 'none';
        }
        if (installInstructionText) {
            installInstructionText.style.display = 'none';
        }
    });
});
    </script>
  <script src="/index-899d8bb1ae58be1faf097299e5ddf3c4.js" defer></script>
</body>
</html>
